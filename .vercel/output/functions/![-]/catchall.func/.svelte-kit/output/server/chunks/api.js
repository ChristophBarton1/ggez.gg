const e="RGAPI-f36f4b7f-33dc-4e2d-b226-ef1d6e8b8bce",t={EUW:"europe",EUW1:"europe",NA:"americas",NA1:"americas",BR1:"americas",LA1:"americas",LA2:"americas",KR:"asia",JP1:"asia",OC1:"sea",TR1:"europe",RU:"europe"},o={EUW:"euw1",NA:"na1",KR:"kr",BR1:"br1",LA1:"la1",LA2:"la2",OC1:"oc1",JP1:"jp1",TR1:"tr1",RU:"ru"};async function a(a,r,n="EUW"){try{const s=`https://${t[n]||"europe"}.api.riotgames.com/riot/account/v1/accounts/by-riot-id/${encodeURIComponent(a)}/${encodeURIComponent(r)}`,i=await fetch(s,{headers:{"X-Riot-Token":e}});if(!i.ok){if(404===i.status)return{error:"Summoner not found"};throw new Error(`Account API error: ${i.status}`)}const c=await i.json(),{puuid:u,gameName:m,tagLine:l}=c,p=o[n]||"euw1",[h,d]=await Promise.all([fetch(`https://${p}.api.riotgames.com/lol/summoner/v4/summoners/by-puuid/${u}`,{headers:{"X-Riot-Token":e}}),fetch(`https://${p}.api.riotgames.com/lol/league/v4/entries/by-puuid/${u}`,{headers:{"X-Riot-Token":e}})]);if(!h.ok)throw new Error(`Summoner API error: ${h.status}`);const f=await h.json();let w=[];return d.ok?w=await d.json():await d.text(),{puuid:u,id:f.id,summonerId:f.id,accountId:f.accountId,name:m,tag:l,profileIconId:f.profileIconId,summonerLevel:f.summonerLevel,ranked:w,region:n,platform:p}}catch(s){return{error:s.message}}}function r(e){return new Promise(t=>setTimeout(t,e))}async function n(o,a,n=20){try{const s=function(e){return t[e]||t[e.toUpperCase()]||"europe"}(a),i=`https://${s}.api.riotgames.com/lol/match/v5/matches/by-puuid/${o}/ids?start=0&count=${n}`,c=await fetch(i,{headers:{"X-Riot-Token":e}});if(!c.ok)return[];const u=await c.json(),m=await async function(t,o,a=10,n=200){const s=[];for(let i=0;i<t.length;i+=a){const c=t.slice(i,i+a).map(async t=>{const a=`https://${o}.api.riotgames.com/lol/match/v5/matches/${t}`;try{const t=await fetch(a,{headers:{"X-Riot-Token":e}});if(!t.ok){if(429===t.status){await r(3e3);const t=await fetch(a,{headers:{"X-Riot-Token":e}});return t.ok?await t.json():null}return null}return await t.json()}catch(n){return null}}),u=await Promise.all(c);s.push(...u.filter(e=>null!==e)),i+a<t.length&&await r(n)}return s}(u,s);return m}catch(s){return[]}}export{n as a,a as g};
